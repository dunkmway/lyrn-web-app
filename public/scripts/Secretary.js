(()=>{let e="",t=[{id:"mhOjmqiieW6zrHcvsElp",name:"Lehi"},{id:"tykwKFrvmQ8xg2kFfEeA",name:"Sandy"}];function a(t={}){t.secretaryFirstName&&t.secretaryLastName?document.getElementById("secretary-name").textContent="Welcome "+t.secretaryFirstName+" "+t.secretaryLastName+"!":document.getElementById("secretary-name").textContent="Welcome Secretary!",t.location&&(e=t.location)}firebase.auth().onAuthStateChanged((function(e){var n;e&&(n=e.uid,firebase.firestore().collection("Secretaries").doc(n).get()).then((e=>{e.exists?(a(e.data()),function(){let e=[],a=[],n=[];t.forEach((e=>{n.push(e.id)})),firebase.firestore().collection("Students").where("location","in",n).get().then((n=>{n.forEach((n=>{const r=n.data();let s="";r.studentTypes.forEach((e=>{switch(e){case"act":s+="ACT, ";break;case"subjectTutoring":s+="Subject-Tutoring, ";break;case"mathProgram":s+="Math-Program, ";break;case"phonicsProgram":s+="Phonics-Program, "}})),s=s.substring(0,s.length-2);let o="";t.forEach((e=>{r.location==e.id&&(o=e.name)})),a.push(getParentData(r.parent).then((t=>{const a={studentUID:n.id,studentName:r.studentLastName+", "+r.studentFirstName,studentTypes:r.studentTypes,studentTypesTable:s,location:o,parentUID:t.parentUID,parentName:t.parentLastName+", "+t.parentFirstName};e.push(a)})))})),Promise.all(a).then((()=>{$("#student-table").DataTable({data:e,columns:[{data:"studentName"},{data:"studentTypesTable"},{data:"location"},{data:"parentName"}],scrollY:"400px",scrollCollapse:!0,paging:!1}).on("click",(t=>{if(t?.target?._DT_CellIndex){let a=e[t.target._DT_CellIndex.row].studentUID;setupNavigationModal(a),document.getElementById("navigationSection").style.display="flex"}}))})).catch((e=>{handleFirebaseErrors(e,window.location.href),console.log(e)}))})).catch((e=>{handleFirebaseErrors(e,window.location.href),console.log(e)}))}()):a()}))}))})();