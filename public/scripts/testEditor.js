/*! For license information please see testEditor.js.LICENSE.txt */
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const s=e[t],r=t+1<e.length,a=r?e[t+1]:0,o=t+2<e.length,c=o?e[t+2]:0,l=s>>2,u=(3&s)<<4|a>>4;let d=(15&a)<<2|c>>6,h=63&c;o||(h=64,r||(d=64)),i.push(n[l],n[u],n[d],n[h])}return i.join("")},encodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(e):this.encodeByteArray(t(e),n)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(r>>10)),t[i++]=String.fromCharCode(56320+(1023&r))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==a||null==o||null==c)throw new i;const l=r<<2|a>>4;if(s.push(l),64!==o){const e=a<<4&240|o>>2;if(s.push(e),64!==c){const e=o<<6&192|c;s.push(e)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s=function(e){return function(e){const i=t(e);return n.encodeByteArray(i,!0)}(e).replace(/\./g,"")},r=function(e){try{return n.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},a=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&r(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},o=()=>{var e;return null===(e=a())||void 0===e?void 0:e.config},c=e=>{var t;return null===(t=a())||void 0===t?void 0:t[`_${e}`]};class l{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function u(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function h(){try{return"object"==typeof indexedDB}catch(e){return!1}}function p(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class g extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,g.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,m.prototype.create)}}class m{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],r=s?function(e,t){return e.replace(f,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",a=`${this.serviceName}: ${r} (${i}).`;return new g(i,a,n)}}const f=/\{\$([^}]+)}/g;function v(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],r=t[s];if(y(n)&&y(r)){if(!v(n,r))return!1}else if(n!==r)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function y(e){return null!==e&&"object"==typeof e}function w(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function I(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function b(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class E{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=S),void 0===i.error&&(i.error=S),void 0===i.complete&&(i.complete=S);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function S(){}const T=1e3,_=2,C=144e5,k=.5;function D(e,t=T,n=_){const i=t*Math.pow(n,e),s=Math.round(k*i*(Math.random()-.5)*2);return Math.min(C,i+s)}function A(e){return e&&e._delegate?e._delegate:e}class L{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const O="[DEFAULT]";class R{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new l;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:O})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=O){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=O){return this.instances.has(e)}getOptions(e=O){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===O?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=O){return this.component?this.component.multipleInstances?e:O:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class N{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new R(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const P=[];var M;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(M||(M={}));const x={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},B=M.INFO,q={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},U=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),s=q[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${i}]  ${e.name}:`,...n)};class F{constructor(e){this.name=e,this._logLevel=B,this._logHandler=U,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in M))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?x[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...e),this._logHandler(this,M.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...e),this._logHandler(this,M.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,M.INFO,...e),this._logHandler(this,M.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,M.WARN,...e),this._logHandler(this,M.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,M.ERROR,...e),this._logHandler(this,M.ERROR,...e)}}const j=(e,t)=>t.some((t=>e instanceof t));let H,V;const z=new WeakMap,W=new WeakMap,K=new WeakMap,G=new WeakMap,J=new WeakMap;let Q={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return W.get(e);if("objectStoreNames"===t)return e.objectStoreNames||K.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return X(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Y(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Z(this),e),X(z.get(this))}:function(...e){return X(t.apply(Z(this),e))}:function(e,...n){const i=t.call(Z(this),e,...n);return K.set(i,e.sort?e.sort():[e]),X(i)}:(e instanceof IDBTransaction&&function(e){if(W.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{t(),i()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)}));W.set(e,t)}(e),j(e,H||(H=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Q):e);var t}function X(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{t(X(e.result)),i()},r=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&z.set(t,e)})).catch((()=>{})),J.set(t,e),t}(e);if(G.has(e))return G.get(e);const t=Y(e);return t!==e&&(G.set(e,t),J.set(t,e)),t}const Z=e=>J.get(e),ee=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],ne=new Map;function ie(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(ne.get(t))return ne.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=te.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!ee.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,s?"readwrite":"readonly");let a=r.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),s&&r.done]))[0]};return ne.set(t,r),r}var se;se=Q,Q={...se,get:(e,t,n)=>ie(e,t)||se.get(e,t,n),has:(e,t)=>!!ie(e,t)||se.has(e,t)};class re{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ae="@firebase/app",oe="0.9.15",ce=new F("@firebase/app"),le="[DEFAULT]",ue={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},de=new Map,he=new Map;function pe(e,t){try{e.container.addComponent(t)}catch(n){ce.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ge(e){const t=e.name;if(he.has(t))return ce.debug(`There were multiple attempts to register component ${t}.`),!1;he.set(t,e);for(const t of de.values())pe(t,e);return!0}function me(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const fe=new m("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ve{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new L("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fe.create("app-deleted",{appName:this._name})}}const ye="10.1.0";function we(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:le,automaticDataCollectionEnabled:!1},t),s=i.name;if("string"!=typeof s||!s)throw fe.create("bad-app-name",{appName:String(s)});if(n||(n=o()),!n)throw fe.create("no-options");const r=de.get(s);if(r){if(v(n,r.options)&&v(i,r.config))return r;throw fe.create("duplicate-app",{appName:s})}const a=new N(s);for(const e of he.values())a.addComponent(e);const c=new ve(n,i,a);return de.set(s,c),c}function Ie(e=le){const t=de.get(e);if(!t&&e===le&&o())return we();if(!t)throw fe.create("no-app",{appName:e});return t}function be(e,t,n){var i;let s=null!==(i=ue[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const e=[`Unable to register library "${s}" with version "${t}":`];return r&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ce.warn(e.join(" "))}ge(new L(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const Ee="firebase-heartbeat-database",Se=1,Te="firebase-heartbeat-store";let _e=null;function Ce(){return _e||(_e=function(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),o=X(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(X(a.result),e.oldVersion,e.newVersion,X(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{r&&e.addEventListener("close",(()=>r())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}(Ee,Se,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Te)}}).catch((e=>{throw fe.create("idb-open",{originalErrorMessage:e.message})}))),_e}async function ke(e,t){try{const n=(await Ce()).transaction(Te,"readwrite"),i=n.objectStore(Te);await i.put(t,De(e)),await n.done}catch(e){if(e instanceof g)ce.warn(e.message);else{const t=fe.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});ce.warn(t.message)}}}function De(e){return`${e.name}!${e.options.appId}`}class Ae{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Oe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Le();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Le(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),Re(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Re(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=s(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Le(){return(new Date).toISOString().substring(0,10)}class Oe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!h()&&p().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Ce();return await t.transaction(Te).objectStore(Te).get(De(e))}catch(e){if(e instanceof g)ce.warn(e.message);else{const t=fe.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});ce.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ke(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ke(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Re(e){return s(JSON.stringify({version:2,heartbeats:e})).length}ge(new L("platform-logger",(e=>new re(e)),"PRIVATE")),ge(new L("heartbeat",(e=>new Ae(e)),"PRIVATE")),be(ae,oe,""),be(ae,oe,"esm2017"),be("fire-js",""),be("firebase","10.1.0","app");const Ne=(e,t)=>t.some((t=>e instanceof t));let Pe,Me;const xe=new WeakMap,Be=new WeakMap,qe=new WeakMap,Ue=new WeakMap,Fe=new WeakMap;let je={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Be.get(e);if("objectStoreNames"===t)return e.objectStoreNames||qe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return He(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function $e(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Me||(Me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Ve(this),e),He(xe.get(this))}:function(...e){return He(t.apply(Ve(this),e))}:function(e,...n){const i=t.call(Ve(this),e,...n);return qe.set(i,e.sort?e.sort():[e]),He(i)}:(e instanceof IDBTransaction&&function(e){if(Be.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{t(),i()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)}));Be.set(e,t)}(e),Ne(e,Pe||(Pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,je):e);var t}function He(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{t(He(e.result)),i()},r=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&xe.set(t,e)})).catch((()=>{})),Fe.set(t,e),t}(e);if(Ue.has(e))return Ue.get(e);const t=$e(e);return t!==e&&(Ue.set(e,t),Fe.set(t,e)),t}const Ve=e=>Fe.get(e),ze=["get","getKey","getAll","getAllKeys","count"],We=["put","add","delete","clear"],Ke=new Map;function Ge(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ke.get(t))return Ke.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=We.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!ze.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,s?"readwrite":"readonly");let a=r.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),s&&r.done]))[0]};return Ke.set(t,r),r}je=(e=>({...e,get:(t,n,i)=>Ge(t,n)||e.get(t,n,i),has:(t,n)=>!!Ge(t,n)||e.has(t,n)}))(je);const Je="@firebase/installations",Qe="0.6.4",Ye=1e4,Xe=`w:${Qe}`,Ze="FIS_v2",et="https://firebaseinstallations.googleapis.com/v1",tt=36e5,nt=new m("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(e){return e instanceof g&&e.code.includes("request-failed")}function st({projectId:e}){return`${et}/projects/${e}/installations`}function rt(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function at(e,t){const n=(await t.json()).error;return nt.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ot({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function ct(e){const t=await e();return t.status>=500&&t.status<600?e():t}function lt(e){return new Promise((t=>{setTimeout(t,e)}))}const ut=/^[cdef][\w-]{21}$/,dt="";function ht(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){var t;return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(e);return ut.test(t)?t:dt}catch(e){return dt}}function pt(e){return`${e.appName}!${e.appId}`}const gt=new Map;function mt(e,t){const n=pt(e);ft(n,t),function(e,t){const n=(!vt&&"BroadcastChannel"in self&&(vt=new BroadcastChannel("[Firebase] FID Change"),vt.onmessage=e=>{ft(e.data.key,e.data.fid)}),vt);n&&n.postMessage({key:e,fid:t}),0===gt.size&&vt&&(vt.close(),vt=null)}(n,t)}function ft(e,t){const n=gt.get(e);if(n)for(const e of n)e(t)}let vt=null;const yt="firebase-installations-database",wt=1,It="firebase-installations-store";let bt=null;function Et(){return bt||(bt=function(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),o=He(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(He(a.result),e.oldVersion,e.newVersion,He(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),o.then((e=>{r&&e.addEventListener("close",(()=>r())),s&&e.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),o}(yt,wt,{upgrade:(e,t)=>{0===t&&e.createObjectStore(It)}})),bt}async function St(e,t){const n=pt(e),i=(await Et()).transaction(It,"readwrite"),s=i.objectStore(It),r=await s.get(n);return await s.put(t,n),await i.done,r&&r.fid===t.fid||mt(e,t.fid),t}async function Tt(e){const t=pt(e),n=(await Et()).transaction(It,"readwrite");await n.objectStore(It).delete(t),await n.done}async function _t(e,t){const n=pt(e),i=(await Et()).transaction(It,"readwrite"),s=i.objectStore(It),r=await s.get(n),a=t(r);return void 0===a?await s.delete(n):await s.put(a,n),await i.done,!a||r&&r.fid===a.fid||mt(e,a.fid),a}async function Ct(e){let t;const n=await _t(e.appConfig,(n=>{const i=function(e){return At(e||{fid:ht(),registrationStatus:0})}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(nt.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=st(e),s=ot(e),r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={fid:n,authVersion:Ze,appId:e.appId,sdkVersion:Xe},o={method:"POST",headers:s,body:JSON.stringify(a)},c=await ct((()=>fetch(i,o)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:rt(e.authToken)}}throw await at("Create Installation",c)}(e,t);return St(e.appConfig,n)}catch(n){throw it(n)&&409===n.customData.serverCode?await Tt(e.appConfig):await St(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:kt(e)}:{installationEntry:t}}(e,i);return t=s.registrationPromise,s.installationEntry}));return n.fid===dt?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function kt(e){let t=await Dt(e.appConfig);for(;1===t.registrationStatus;)await lt(100),t=await Dt(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Ct(e);return n||t}return t}function Dt(e){return _t(e,(e=>{if(!e)throw nt.create("installation-not-found");return At(e)}))}function At(e){return 1===(t=e).registrationStatus&&t.registrationTime+Ye<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Lt({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${st(e)}/${t}/authTokens:generate`}(e,n),s=function(e,{refreshToken:t}){const n=ot(e);return n.append("Authorization",function(e){return`${Ze} ${e}`}(t)),n}(e,n),r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:Xe,appId:e.appId}},o={method:"POST",headers:s,body:JSON.stringify(a)},c=await ct((()=>fetch(i,o)));if(c.ok)return rt(await c.json());throw await at("Generate Auth Token",c)}async function Ot(e,t=!1){let n;const i=await _t(e.appConfig,(i=>{if(!Nt(i))throw nt.create("not-registered");const s=i.authToken;if(!t&&(2===(r=s).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+tt}(r)))return i;var r;if(1===s.requestStatus)return n=async function(e,t){let n=await Rt(e.appConfig);for(;1===n.authToken.requestStatus;)await lt(100),n=await Rt(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Ot(e,t):i}(e,t),i;{if(!navigator.onLine)throw nt.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Lt(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await St(e.appConfig,i),n}catch(n){if(!it(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await St(e.appConfig,n)}else await Tt(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Rt(e){return _t(e,(e=>{if(!Nt(e))throw nt.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+Ye<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function Nt(e){return void 0!==e&&2===e.registrationStatus}function Pt(e){return nt.create("missing-app-config-values",{valueName:e})}const Mt="installations";ge(new L(Mt,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Pt("App Configuration");if(!e.name)throw Pt("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Pt(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:me(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ge(new L("installations-internal",(e=>{const t=me(e.getProvider("app").getImmediate(),Mt).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await Ct(t);return i?i.catch(console.error):Ot(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await Ct(e);t&&await t}(n),(await Ot(n,t)).token}(t,e)}}),"PRIVATE")),be(Je,Qe),be(Je,Qe,"esm2017");const xt="analytics",Bt="firebase_id",qt="origin",Ut=6e4,Ft="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jt="https://www.googletagmanager.com/gtag/js",$t=new F("@firebase/analytics"),Ht=new m("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Vt(e){if(!e.startsWith(jt)){const t=Ht.create("invalid-gtag-resource",{gtagURL:e});return $t.warn(t.message),""}return e}function zt(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const Wt=30,Kt=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Gt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Jt(e,t=Kt,n){const{appId:i,apiKey:s,measurementId:r}=e.options;if(!i)throw Ht.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw Ht.create("no-api-key")}const a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Yt;return setTimeout((async()=>{o.abort()}),void 0!==n?n:Ut),Qt({appId:i,apiKey:s,measurementId:r},a,o,t)}async function Qt(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=Kt){var r;const{appId:a,measurementId:o}=e;try{await function(e,t){return new Promise(((n,i)=>{const s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener((()=>{clearTimeout(r),i(Ht.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(o)return $t.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:a,measurementId:o};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,s={method:"GET",headers:Gt(i)},r=Ft.replace("{app-id}",n),a=await fetch(r,s);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Ht.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return s.deleteThrottleMetadata(a),t}catch(t){const c=t;if(!function(e){if(!(e instanceof g&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(s.deleteThrottleMetadata(a),o)return $t.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:a,measurementId:o};throw t}const l=503===Number(null===(r=null==c?void 0:c.customData)||void 0===r?void 0:r.httpStatus)?D(n,s.intervalMillis,Wt):D(n,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return s.setThrottleMetadata(a,u),$t.debug(`Calling attemptFetch again in ${l} millis`),Qt(e,u,i,s)}}class Yt{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Xt,Zt;async function en(e,t,n,i,s,r,a){var o;const c=Jt(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&$t.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>$t.error(e))),t.push(c);const l=async function(){if(!h())return $t.warn(Ht.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await p()}catch(e){return $t.warn(Ht.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[u,d]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(jt)&&n.src.includes(e))return n;return null})(r)||function(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",t)),n}(0,{createScriptURL:Vt}),i=document.createElement("script"),s=`${jt}?l=${e}&id=${t}`;i.src=n?null==n?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}(r,u.measurementId),Zt&&(s("consent","default",Zt),Zt=void 0),s("js",new Date);const g=null!==(o=null==a?void 0:a.config)&&void 0!==o?o:{};return g[qt]="firebase",g.update=!0,null!=d&&(g[Bt]=d),s("config",u.measurementId,g),Xt&&(s("set",Xt),Xt=void 0),u.measurementId}class tn{constructor(e){this.app=e}_delete(){return delete nn[this.app.options.appId],Promise.resolve()}}let nn={},sn=[];const rn={};let an,on,cn="dataLayer",ln=!1;function un(e,t,n){!function(){const e=[];if(d()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Ht.create("invalid-analytics-context",{errorInfo:t});$t.warn(n.message)}}();const i=e.options.appId;if(!i)throw Ht.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ht.create("no-api-key");$t.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=nn[i])throw Ht.create("already-exists",{id:i});if(!ln){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(cn);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,s){let r=function(...e){window[i].push(arguments)};return window[s]&&"function"==typeof window[s]&&(r=window[s]),window[s]=function(e,t,n,i){return async function(s,...r){try{if("event"===s){const[i,s]=r;await async function(e,t,n,i,s){try{let r=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const i=await zt(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),s=e&&t[e.appId];if(!s){r=[];break}r.push(s)}}0===r.length&&(r=Object.values(t)),await Promise.all(r),e("event",i,s||{})}catch(e){$t.error(e)}}(e,t,n,i,s)}else if("config"===s){const[s,a]=r;await async function(e,t,n,i,s,r){const a=i[s];try{if(a)await t[a];else{const e=(await zt(n)).find((e=>e.measurementId===s));e&&await t[e.appId]}}catch(e){$t.error(e)}e("config",s,r)}(e,t,n,i,s,a)}else if("consent"===s){const[t]=r;e("consent","update",t)}else if("get"===s){const[t,n,i]=r;e("get",t,n,i)}else if("set"===s){const[t]=r;e("set",t)}else e(s,...r)}catch(e){$t.error(e)}}}(r,e,t,n),{gtagCore:r,wrappedGtag:window[s]}}(nn,sn,rn,cn,"gtag");on=e,an=t,ln=!0}return nn[i]=en(e,sn,rn,t,an,cn,n),new tn(e)}const dn="@firebase/analytics",hn="0.10.0";ge(new L(xt,((e,{options:t})=>un(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),ge(new L("analytics-internal",(function(e){try{const t=e.getProvider(xt).getImmediate();return{logEvent:(e,n,i)=>function(e,t,n,i){e=A(e),async function(e,t,n,i,s){if(s&&s.global)e("event",n,i);else{const s=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:s}))}}(on,nn[e.app.options.appId],t,n,i).catch((e=>$t.error(e)))}(t,e,n,i)}}catch(e){throw Ht.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),be(dn,hn),be(dn,hn,"esm2017");const pn=we({apiKey:"AIzaSyD8GSMZzjbubQ7AGcQKIV-enpDYpz_07mo",authDomain:"lyrn-web-app.firebaseapp.com",projectId:"lyrn-web-app",storageBucket:"lyrn-web-app.appspot.com",messagingSenderId:"80732012862",appId:"1:80732012862:web:22ffb978c80a1d2a0f2c6f",measurementId:"G-F2QZT3W2CX"});!function(e=Ie()){const t=me(e=A(e),xt);t.isInitialized()?t.getImmediate():function(e,t={}){const n=me(e,xt);if(n.isInitialized()){const e=n.getImmediate();if(v(t,n.getOptions()))return e;throw Ht.create("already-initialized")}n.initialize({options:t})}(e)}(pn),"localhost"===location.hostname||location.hostname;const gn=pn;function mn(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const fn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},vn=new m("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yn=new F("@firebase/auth");function wn(e,...t){yn.logLevel<=M.ERROR&&yn.error(`Auth (${ye}): ${e}`,...t)}function In(e,...t){throw En(e,...t)}function bn(e,...t){return En(e,...t)}function En(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return vn.create(e,...t)}function Sn(e,t,...n){if(!e)throw En(t,...n)}function Tn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw wn(t),new Error(t)}function _n(e,t){e||Tn(t)}function Cn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function kn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Dn{constructor(e,t){this.shortDelay=e,this.longDelay=t,_n(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===kn()||"https:"===kn()||d()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function An(e,t){_n(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Ln{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const On={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Rn=new Dn(3e4,6e4);function Nn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Pn(e,t,n,i,s={}){return Mn(e,s,(async()=>{let s={},r={};i&&("GET"===t?r=i:s={body:JSON.stringify(i)});const a=w(Object.assign({key:e.config.apiKey},r)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),Ln.fetch()(Bn(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},s))}))}async function Mn(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},On),t);try{const t=new qn(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const r=await s.json();if("needConfirmation"in r)throw Un(e,"account-exists-with-different-credential",r);if(s.ok&&!("errorMessage"in r))return r;{const t=s.ok?r.errorMessage:r.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Un(e,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw Un(e,"email-already-in-use",r);if("USER_DISABLED"===n)throw Un(e,"user-disabled",r);const o=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw function(e,t,n){const i=Object.assign(Object.assign({},fn()),{[t]:n});return new m("auth","Firebase",i).create(t,{appName:e.name})}(e,o,a);In(e,o)}}catch(t){if(t instanceof g)throw t;In(e,"network-request-failed",{message:String(t)})}}async function xn(e,t,n,i,s={}){const r=await Pn(e,t,n,i,s);return"mfaPendingCredential"in r&&In(e,"multi-factor-auth-required",{_serverResponse:r}),r}function Bn(e,t,n,i){const s=`${t}${n}?${i}`;return e.config.emulator?An(e.config,s):`${e.config.apiScheme}://${s}`}class qn{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(bn(this.auth,"network-request-failed"))),Rn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=bn(e,t,i);return s.customData._tokenResponse=n,s}function Fn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function jn(e,t=!1){const n=A(e),i=await n.getIdToken(t),s=Hn(i);Sn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r="object"==typeof s.firebase?s.firebase:void 0,a=null==r?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Fn($n(s.auth_time)),issuedAtTime:Fn($n(s.iat)),expirationTime:Fn($n(s.exp)),signInProvider:a||null,signInSecondFactor:(null==r?void 0:r.sign_in_second_factor)||null}}function $n(e){return 1e3*Number(e)}function Hn(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return wn("JWT malformed, contained fewer than 3 sections"),null;try{const e=r(n);return e?JSON.parse(e):(wn("Failed to decode base64 JWT payload"),null)}catch(e){return wn("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function Vn(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof g&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class zn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Wn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fn(this.lastLoginAt),this.creationTime=Fn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kn(e){var t;const n=e.auth,i=await e.getIdToken(),s=await Vn(e,async function(e,t){return Pn(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));Sn(null==s?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const a=(null===(t=r.providerUserInfo)||void 0===t?void 0:t.length)?r.providerUserInfo.map((e=>{var{providerId:t}=e,n=mn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],o=(c=e.providerData,l=a,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,d=!(e.email&&r.passwordHash||(null==o?void 0:o.length)),h=!!u&&d,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Wn(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(e,p)}class Gn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Sn(e.idToken,"internal-error"),Sn(void 0!==e.idToken,"internal-error"),Sn(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Hn(e);return Sn(t,"internal-error"),Sn(void 0!==t.exp,"internal-error"),Sn(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Sn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await Mn(e,{},(async()=>{const n=w({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,r=Bn(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ln.fetch()(r,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,r=new Gn;return n&&(Sn("string"==typeof n,"internal-error",{appName:e}),r.refreshToken=n),i&&(Sn("string"==typeof i,"internal-error",{appName:e}),r.accessToken=i),s&&(Sn("number"==typeof s,"internal-error",{appName:e}),r.expirationTime=s),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gn,this.toJSON())}_performRefresh(){return Tn("not implemented")}}function Jn(e,t){Sn("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Qn{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=mn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wn(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Vn(this,this.stsTokenManager.getToken(this.auth,e));return Sn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jn(this,e)}reload(){return async function(e){const t=A(e);await Kn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Sn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Sn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Kn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Vn(this,async function(e,t){return Pn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,r,a,o,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(i=t.email)&&void 0!==i?i:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(r=t.photoURL)&&void 0!==r?r:void 0,g=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,f=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:I,providerData:b,stsTokenManager:E}=t;Sn(y&&E,e,"internal-error");const S=Gn.fromJSON(this.name,E);Sn("string"==typeof y,e,"internal-error"),Jn(u,e.name),Jn(d,e.name),Sn("boolean"==typeof w,e,"internal-error"),Sn("boolean"==typeof I,e,"internal-error"),Jn(h,e.name),Jn(p,e.name),Jn(g,e.name),Jn(m,e.name),Jn(f,e.name),Jn(v,e.name);const T=new Qn({uid:y,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:I,photoURL:p,phoneNumber:h,tenantId:g,stsTokenManager:S,createdAt:f,lastLoginAt:v});return b&&Array.isArray(b)&&(T.providerData=b.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t,n=!1){const i=new Gn;i.updateFromServerResponse(t);const s=new Qn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Kn(s),s}}const Yn=new Map;function Xn(e){_n(e instanceof Function,"Expected a class definition");let t=Yn.get(e);return t?(_n(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Yn.set(e,t),t)}class Zn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Zn.type="NONE";const ei=Zn;function ti(e,t,n){return`firebase:${e}:${t}:${n}`}class ni{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=ti(this.userKey,i.apiKey,s),this.fullPersistenceKey=ti("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ni(Xn(ei),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=i[0]||Xn(ei);const r=ti(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=await n._get(r);if(t){const i=Qn._fromJSON(e,t);n!==s&&(a=i),s=n;break}}catch(e){}const o=i.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(r,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(r)}catch(e){}}))),new ni(s,e,n)):new ni(s,e,n)}}function ii(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(oi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(si(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(li(t))return"Blackberry";if(ui(t))return"Webos";if(ri(t))return"Safari";if((t.includes("chrome/")||ai(t))&&!t.includes("edge/"))return"Chrome";if(ci(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function si(e=u()){return/firefox\//i.test(e)}function ri(e=u()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ai(e=u()){return/crios\//i.test(e)}function oi(e=u()){return/iemobile/i.test(e)}function ci(e=u()){return/android/i.test(e)}function li(e=u()){return/blackberry/i.test(e)}function ui(e=u()){return/webos/i.test(e)}function di(e=u()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function hi(e=u()){return di(e)||ci(e)||ui(e)||li(e)||/windows phone/i.test(e)||oi(e)}function pi(e,t=[]){let n;switch(e){case"Browser":n=ii(u());break;case"Worker":n=`${ii(u())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ye}/${i}`}async function gi(e,t){return Pn(e,"GET","/v2/recaptchaConfig",Nn(e,t))}function mi(e){return void 0!==e&&void 0!==e.enterprise}class fi{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function vi(e){return new Promise(((t,n)=>{const i=document.createElement("script");var s,r;i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=bn("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",(null!==(r=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==r?r:document).appendChild(i)}))}function yi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class wi{constructor(e){this.type="recaptcha-enterprise",this.auth=Si(e)}async verify(e="verify",t=!1){function n(t,n,i){const s=window.grecaptcha;mi(s)?s.enterprise.ready((()=>{s.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{gi(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new fi(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((s=>{if(!t&&mi(window.grecaptcha))n(s,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));vi("https://www.google.com/recaptcha/enterprise.js?render="+s).then((()=>{n(s,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function Ii(e,t,n,i=!1){const s=new wi(e);let r;try{r=await s.verify(n)}catch(e){r=await s.verify(n,!0)}const a=Object.assign({},t);return i?Object.assign(a,{captchaResp:r}):Object.assign(a,{captchaResponse:r}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class bi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(e){i(e)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Ei{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ti(this),this.idTokenSubscription=new Ti(this),this.beforeStateQueue=new bi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xn(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await ni.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null==i?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==r||!(null==a?void 0:a.user)||(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Sn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kn(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?A(e):null;return t&&Sn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Sn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Xn(e))}))}async initializeRecaptchaConfig(){const e=await gi(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new fi(e);null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled&&new wi(this).verify()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new m("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xn(e)||this._popupRedirectResolver;Sn(t,this,"argument-error"),this.redirectPersistenceManager=await ni.create(this,[Xn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),r=this._isInitialized?Promise.resolve():this._initializationPromise;return Sn(r,this,"internal-error"),r.then((()=>s(this.currentUser))),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Sn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){yn.logLevel<=M.WARN&&yn.warn(`Auth (${ye}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Si(e){return A(e)}class Ti{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new E(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Sn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _i(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ci(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ki{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Tn("not implemented")}_getIdTokenResponse(e){return Tn("not implemented")}_linkToIdToken(e,t){return Tn("not implemented")}_getReauthenticationResolver(e){return Tn("not implemented")}}async function Di(e,t){return xn(e,"POST","/v1/accounts:signInWithPassword",Nn(e,t))}class Ai extends ki{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ai(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ai(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Ii(e,n,"signInWithPassword");return Di(e,t)}return Di(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Ii(e,n,"signInWithPassword");return Di(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return xn(e,"POST","/v1/accounts:signInWithEmailLink",Nn(e,t))}(e,{email:this._email,oobCode:this._password});default:In(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return Pn(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return xn(e,"POST","/v1/accounts:signInWithEmailLink",Nn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:In(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Li(e,t){return xn(e,"POST","/v1/accounts:signInWithIdp",Nn(e,t))}class Oi extends ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):In("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=mn(t,["providerId","signInMethod"]);if(!n||!i)return null;const r=new Oi(n,i);return r.idToken=s.idToken||void 0,r.accessToken=s.accessToken||void 0,r.secret=s.secret,r.nonce=s.nonce,r.pendingToken=s.pendingToken||null,r}_getIdTokenResponse(e){return Li(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Li(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Li(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=w(t)}return e}}const Ri={USER_NOT_FOUND:"user-not-found"};class Ni extends ki{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ni({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ni({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return xn(e,"POST","/v1/accounts:signInWithPhoneNumber",Nn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await xn(e,"POST","/v1/accounts:signInWithPhoneNumber",Nn(e,t));if(n.temporaryProof)throw Un(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return xn(e,"POST","/v1/accounts:signInWithPhoneNumber",Nn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ri)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return n||t||i||s?new Ni({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}):null}}class Pi{constructor(e){var t,n,i,s,r,a;const o=I(b(e)),c=null!==(t=o.apiKey)&&void 0!==t?t:null,l=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=o.mode)&&void 0!==i?i:null);Sn(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(r=o.languageCode)&&void 0!==r?r:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=I(b(e)).link,n=t?I(b(t)).deep_link_id:null,i=I(b(e)).deep_link_id;return(i?I(b(i)).link:null)||i||n||t||e}(e);try{return new Pi(t)}catch(e){return null}}}class Mi{constructor(){this.providerId=Mi.PROVIDER_ID}static credential(e,t){return Ai._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Pi.parseLink(t);return Sn(n,"argument-error"),Ai._fromEmailAndCode(e,n.code,n.tenantId)}}Mi.PROVIDER_ID="password",Mi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Mi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class xi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Bi extends xi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qi extends Bi{constructor(){super("facebook.com")}static credential(e){return Oi._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch(e){return null}}}qi.FACEBOOK_SIGN_IN_METHOD="facebook.com",qi.PROVIDER_ID="facebook.com";class Ui extends Bi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oi._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ui.credential(t,n)}catch(e){return null}}}Ui.GOOGLE_SIGN_IN_METHOD="google.com",Ui.PROVIDER_ID="google.com";class Fi extends Bi{constructor(){super("github.com")}static credential(e){return Oi._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch(e){return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com",Fi.PROVIDER_ID="github.com";class ji extends Bi{constructor(){super("twitter.com")}static credential(e,t){return Oi._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ji.credential(t,n)}catch(e){return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com",ji.PROVIDER_ID="twitter.com";class $i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await Qn._fromIdTokenResponse(e,n,i),r=Hi(n);return new $i({user:s,providerId:r,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Hi(n);return new $i({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Hi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Vi extends g{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Vi.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Vi(e,t,n,i)}}function zi(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Vi._fromErrorAndOperation(e,n,t,i);throw n}))}function Wi(e){return A(e).signOut()}new WeakMap;const Ki="__sak";class Gi{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ki,"1"),this.storage.removeItem(Ki),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ji extends Gi{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=u();return ri(e)||di(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=hi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);!function(){const e=u();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||s===e.newValue||e.newValue===e.oldValue?i():setTimeout(i,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ji.type="LOCAL";const Qi=Ji;class Yi extends Gi{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Yi.type="SESSION";const Xi=Yi;class Zi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Zi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,r=this.handlersMap[i];if(!(null==r?void 0:r.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(r).map((async e=>e(t.origin,s))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function es(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Zi.receivers=[];class ts{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,r;return new Promise(((a,o)=>{const c=es("",20);i.port1.start();const l=setTimeout((()=>{o(new Error("unsupported_event"))}),n);r={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}function ns(){return window}function is(){return void 0!==ns().WorkerGlobalScope&&"function"==typeof ns().importScripts}const ss="firebaseLocalStorageDb",rs="firebaseLocalStorage",as="fbase_key";class os{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function cs(e,t){return e.transaction([rs],t?"readwrite":"readonly").objectStore(rs)}function ls(){const e=indexedDB.open(ss,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(rs,{keyPath:as})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(rs)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ss);return new os(e).toPromise()}(),t(await ls()))}))}))}async function us(e,t,n){const i=cs(e,!0).put({[as]:t,value:n});return new os(i).toPromise()}function ds(e,t){const n=cs(e,!0).delete(t);return new os(n).toPromise()}class hs{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ls()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return is()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zi._getInstance(is()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ts(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ls();return await us(e,Ki,"1"),await ds(e,Ki),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>us(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=cs(e,!1).get(t),i=await new os(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>ds(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=cs(e,!1).getAll();return new os(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}hs.type="LOCAL";const ps=hs;yi("rcb"),new Dn(3e4,6e4);class gs{constructor(e){this.providerId=gs.PROVIDER_ID,this.auth=Si(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const s=await n.verify();try{let r;if(Sn("string"==typeof s,e,"argument-error"),Sn("recaptcha"===n.type,e,"argument-error"),r="string"==typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){Sn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Pn(e,"POST","/v2/accounts/mfaEnrollment:start",Nn(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Sn("signin"===t.type,e,"internal-error");const n=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;Sn(n,e,"missing-multi-factor-info");const a=await function(e,t){return Pn(e,"POST","/v2/accounts/mfaSignIn:start",Nn(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Pn(e,"POST","/v1/accounts:sendVerificationCode",Nn(e,t))}(e,{phoneNumber:r.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}(this.auth,e,A(t))}static credential(e,t){return Ni._fromVerification(e,t)}static credentialFromResult(e){const t=e;return gs.credentialFromTaggedObject(t)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ni._fromTokenResponse(t,n):null}}gs.PROVIDER_ID="phone",gs.PHONE_SIGN_IN_METHOD="phone";class ms extends ki{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Li(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Li(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Li(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fs(e){return async function(e,t,n=!1){const i="signIn",s=await zi(e,i,t),r=await $i._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}(e.auth,new ms(e),e.bypassAuthState)}function vs(e){const{auth:t,user:n}=e;return Sn(n,t,"internal-error"),async function(e,t,n=!1){const{auth:i}=e,s="reauthenticate";try{const r=await Vn(e,zi(i,s,t,e),n);Sn(r.idToken,i,"internal-error");const a=Hn(r.idToken);Sn(a,i,"internal-error");const{sub:o}=a;return Sn(e.uid===o,i,"user-mismatch"),$i._forOperation(e,s,r)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&In(i,"user-mismatch"),e}}(n,new ms(e),e.bypassAuthState)}async function ys(e){const{auth:t,user:n}=e;return Sn(n,t,"internal-error"),async function(e,t,n=!1){const i=await Vn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return $i._forOperation(e,"link",i)}(n,new ms(e),e.bypassAuthState)}class ws{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:r,type:a}=e;if(r)return void this.reject(r);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fs;case"linkViaPopup":case"linkViaRedirect":return ys;case"reauthViaPopup":case"reauthViaRedirect":return vs;default:In(this.auth,"internal-error")}}resolve(e){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Is=new Dn(2e3,1e4);class bs extends ws{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Sn(e,this.auth,"internal-error"),e}async onExecution(){_n(1===this.filter.length,"Popup operations only handle one event");const e=es();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(bn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Is.get())};e()}}bs.currentPopupAction=null;const Es="pendingRedirect",Ss=new Map;class Ts extends ws{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ss.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return ti(Es,e.config.apiKey,e.name)}(t),i=function(e){return Xn(e._redirectPersistence)}(e);if(!await i._isAvailable())return!1;const s="true"===await i._get(n);return await i._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ss.set(this.auth._key(),e)}return this.bypassAuthState||Ss.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function _s(e,t){Ss.set(e._key(),t)}async function Cs(e,t,n=!1){const i=Si(e),s=function(e,t){return t?Xn(t):(Sn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),r=new Ts(i,s,n),a=await r.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}class ks{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return As(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!As(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(bn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ds(e))}saveEventToCache(e){this.cachedEventUids.add(Ds(e)),this.lastProcessedEventTime=Date.now()}}function Ds(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function As({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const Ls=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Os=/^https?/;function Rs(e){const t=Cn(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===i}if(!Os.test(n))return!1;if(Ls.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const Ns=new Dn(3e4,6e4);function Ps(){const e=ns().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Ms=null;function xs(e){return Ms=Ms||function(e){return new Promise(((t,n)=>{var i,s,r;function a(){Ps(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ps(),n(bn(e,"network-request-failed"))},timeout:Ns.get()})}if(null===(s=null===(i=ns().gapi)||void 0===i?void 0:i.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(r=ns().gapi)||void 0===r?void 0:r.load)){const t=yi("iframefcb");return ns()[t]=()=>{gapi.load?a():n(bn(e,"network-request-failed"))},vi(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw Ms=null,e}))}(e),Ms}const Bs=new Dn(5e3,15e3),qs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Us=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fs(e){const t=e.config;Sn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?An(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:ye},s=Us.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${w(i).slice(1)}`}const js={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $s{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const Hs=encodeURIComponent("fac");async function Vs(e,t,n,i,s,r){Sn(e.config.authDomain,e,"auth-domain-config-required"),Sn(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:ye,eventId:s};if(t instanceof xi){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(r||{}))a[e]=t}if(t instanceof Bi){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const e of Object.keys(o))void 0===o[e]&&delete o[e];const c=await e._getAppCheckToken(),l=c?`#${Hs}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?An(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${w(o).slice(1)}${l}`}const zs="webStorageSupport",Ws=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xi,this._completeRedirectFn=Cs,this._overrideRedirectResult=_s}async _openPopup(e,t,n,i){var s;return _n(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,s=600){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const c=Object.assign(Object.assign({},js),{width:i.toString(),height:s.toString(),top:r,left:a}),l=u().toLowerCase();n&&(o=ai(l)?"_blank":n),si(l)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=u()){var t;return di(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",o),new $s(null);const h=window.open(t||"",o,d);Sn(h,e,"popup-blocked");try{h.focus()}catch(e){}return new $s(h)}(e,await Vs(e,t,n,Cn(),i),es())}async _openRedirect(e,t,n,i){return await this._originValidation(e),s=await Vs(e,t,n,Cn(),i),ns().location.href=s,new Promise((()=>{}));var s}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(_n(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await xs(e),n=ns().gapi;return Sn(n,e,"internal-error"),t.open({where:document.body,url:Fs(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qs,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const s=bn(e,"network-request-failed"),r=ns().setTimeout((()=>{i(s)}),Bs.get());function a(){ns().clearTimeout(r),n(t)}t.ping(a).then(a,(()=>{i(s)}))}))))}(e),n=new ks(e);return t.register("authEvent",(t=>(Sn(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zs,{type:zs},(n=>{var i;const s=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[zs];void 0!==s&&t(!!s),In(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Pn(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(Rs(e))return}catch(e){}In(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hi()||ri()||di()}};var Ks="@firebase/auth",Gs="1.1.0";class Js{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Sn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Qs=c("authIdTokenMaxAge")||300;let Ys=null;var Xs;Xs="Browser",ge(new L("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:r,authDomain:a}=n.options;Sn(r&&!r.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:r,authDomain:a,clientPlatform:Xs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pi(Xs)},c=new Ei(n,i,s,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Xn);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ge(new L("auth-internal",(e=>(e=>new Js(e))(Si(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),be(Ks,Gs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Xs)),be(Ks,Gs,"esm2017");class Zs{constructor(e){this.message=e.message??document.createElement("div"),this.choices=e.choices??[],this.values=e.values??[],this.slideInDir=e.slideInDir??null,this.slideInDist=e.slideInDist??100,this.slideInDuration=e.slideInDuration??500,this.slideInTiming=e.slideInTiming??"ease",this.slideOutDir=e.slideOutDir??null,this.slideOutDist=e.slideOutDist??100,this.slideOutDuration=e.slideOutDuration??500,this.slideOutTiming=e.slideOutTiming??"ease",this.fadeIn=e.fadeIn??null,this.fadeInDuration=e.fadeInDuration??500,this.fadeInTiming=e.fadeInTiming??"ease",this.fadeOut=e.fadeOut??null,this.fadeOutDuration=e.fadeOutDuration??500,this.fadeOutTiming=e.fadeOutTiming??"ease",this.container=document.createElement("div"),this.blocking=e.blocking??!0,this.windowBackgroundColor=e.windowBackgroundColor??(this.blocking?"rgb(0, 0, 0, 0.5)":"transparent"),this.windowPadding=e.windowPadding??"2em",this.hideOnWindow=e.hideOnWindow??this.blocking,this.wrapper=document.createElement("div"),this.width=e.width??"auto",this.justify=e.justify??"center",this.align=e.align??"center",this.backgroundColor=e.backgroundColor??"#FFFFFF",this.messageColor=e.messageColor??"#5B5B5B",this.messageFontSize=e.messageFontSize??"inherit",this.messageFontWeight=e.messageFontWeight??"inherit",this.choiceColor=e.choiceColor??"#057AFB",this.choiceFontSize=e.choiceFontSize??"inherit",this.choiceFontWeight=e.choiceFontWeight??"inherit",this.borderRadius=e.borderRadius??"0.5em",this.shadow=e.shadow??"0 0 10px 1px rgba(0, 0, 0, 0.3)",this.padding=e.padding??"1em 2em",this.choicesBorderTop=e.choicesBorderTop??"1px solid #D5D5D5",this.justifyChoices=e.justifyChoices??"end",this.hideOnDialog=e.hideOnDialog??!this.blocking,this.timeout=e.timeout??null}show(){return new Promise(((e,t)=>{for(;this.wrapper.firstChild;)this.wrapper.removeChild(this.wrapper.firstChild);if(this.container.style.boxSizing="border-box",this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.justifyContent=this.justify,this.container.style.alignItems=this.align,this.container.style.position="fixed",this.container.style.top=0,this.container.style.left=0,this.container.style.zIndex=9999,this.container.style.width="100vw",this.container.style.height="100vh",this.container.style.padding=this.windowPadding,this.container.style.backgroundColor=this.windowBackgroundColor,this.blocking?this.container.style.pointerEvents="auto":this.container.style.pointerEvents="none",this.hideOnWindow&&this.container.addEventListener("click",(t=>{t.target===t.currentTarget&&(e(null),this.hide())})),this.wrapper.style.width=this.width,this.wrapper.style.backgroundColor=this.backgroundColor,this.wrapper.style.color=this.messageColor,this.wrapper.style.borderRadius=this.borderRadius,this.wrapper.style.boxShadow=this.shadow,this.wrapper.style.pointerEvents="auto",this.slideInDir)switch(this.slideInDir){case"down":this.wrapper.style.transform=`translateY(-${this.slideInDist}px)`;break;case"right":this.wrapper.style.transform=`translateX(-${this.slideInDist}px)`;break;case"up":this.wrapper.style.transform=`translateY(${this.slideInDist}px)`;break;case"left":this.wrapper.style.transform=`translateX(${this.slideInDist}px)`;break;default:this.wrapper.style.transform="transform(0px)"}this.fadeIn&&(this.wrapper.style.opacity=0),this.hideOnDialog&&this.wrapper.addEventListener("click",(()=>{e(null),this.hide()})),this.container.appendChild(this.wrapper);const n=document.createElement("div");if(n.style.padding=this.padding,"string"==typeof this.message?(n.textContent=this.message,n.style.fontSize=this.messageFontSize,n.style.fontWeight=this.messageFontWeight):n.appendChild(this.message),this.wrapper.appendChild(n),this.choices.length>0){const t=document.createElement("div");t.style.padding=this.padding,t.style.borderTop=this.choicesBorderTop,t.style.display="flex",t.style.flexDirection="row",t.style.justifyContent=this.justifyChoices,this.choices.forEach(((n,i)=>{let s;"string"==typeof n?(s=document.createElement("p"),s.style.margin="0",s.textContent=n,s.style.fontSize=this.choiceFontSize,s.style.fontWeight=this.choiceFontWeight):s=n,"end"===this.justifyChoices&&(s.style.paddingLeft="1em"),"start"===this.justifyChoices&&(s.style.paddingRight="1em"),s.style.cursor="pointer",s.style.color=this.choiceColor,s.addEventListener("click",(()=>{e(this.values[i]),this.hide()})),t.appendChild(s)})),this.wrapper.appendChild(t)}document.body.appendChild(this.container);let i=null;this.slideInDir&&(i=`transform ${this.slideInDuration}ms ${this.slideInTiming}`,requestAnimationFrame((()=>{this.wrapper.style.transform="translate(0px)"}))),this.fadeIn&&(i?i+=`, opacity ${this.fadeInDuration}ms ${this.fadeInTiming}`:i=`, opacity ${this.fadeInDuration}ms ${this.fadeInTiming}`,requestAnimationFrame((()=>{this.wrapper.style.opacity=1}))),i&&(this.wrapper.style.transition=i),this.timeout&&setTimeout((()=>{e(null),this.hide()}),this.timeout)}))}hide(){let e=null;this.slideOutDir&&(e=`transform ${this.slideOutDuration}ms ${this.slideOutTiming}`,requestAnimationFrame((()=>{switch(this.slideOutDir){case"up":this.wrapper.style.transform=`translateY(-${this.slideOutDist}px)`;break;case"right":this.wrapper.style.transform=`translateX(${this.slideOutDist}px)`;break;case"down":this.wrapper.style.transform=`translateY(${this.slideOutDist}px)`;break;case"left":this.wrapper.style.transform=`translateX(-${this.slideOutDist}px)`;break;default:this.wrapper.style.transform="transform(0px)"}}))),this.fadeOut&&(e?e+=`, opacity ${this.fadeOutDuration}ms ${this.fadeOutTiming}`:e=`, opacity ${this.fadeOutDuration}ms ${this.fadeOutTiming}`,requestAnimationFrame((()=>{this.wrapper.style.opacity=0}))),e&&(this.wrapper.style.transition=e),this.slideOutDir||this.fadeOut?setTimeout((()=>{this.container.remove()}),Math.max(this.slideOutDir?this.slideOutDuration:0,this.fadeOut?this.fadeOutDuration:0)):this.container.remove()}static alert(e,t={}){return new Zs({message:e,choices:["Close"],values:[null],width:"auto",...t}).show()}static confirm(e,t={}){return new Zs({message:e,choices:["Cancel","OK"],values:[!1,!0],width:"400px",...t}).show()}static prompt(e,t={}){const n=document.createElement("div"),i=document.createElement("textarea");i.style.display="block",i.style.width="400px",i.style.marginTop="1em",i.style.fontSize="16px",n.append(e,i);const s=new Zs({message:n,choices:["Cancel","OK"],values:[null,()=>i.value],width:"auto",...t}),r=new Promise(((e,t)=>{i.addEventListener("keyup",(t=>{"Enter"==t.key&&(t.ctrlKey||t.metaKey)&&(e(i.value),s.hide())}))})),a=s.show().then((e=>e&&e()));return Promise.race([r,a])}static toastMessage(e,t={}){return new Zs({message:e,backgroundColor:"#61A1EA",messageColor:"#FFFFFF",messageFontSize:"14px",messageFontWeight:700,blocking:!1,justify:"end",align:"start",shadow:"0 0 10px 1px rgba(0, 0, 0, 0.2)",slideInDir:"down",slideInDist:150,slideOutDir:"right",slideOutDist:300,timeout:5e3,...t}).show()}static toastError(e,t={}){return new Zs({message:e,backgroundColor:"#E36868",messageColor:"#FFFFFF",messageFontSize:"14px",messageFontWeight:700,blocking:!1,justify:"end",align:"start",shadow:"0 0 10px 1px rgba(0, 0, 0, 0.2)",slideInDir:"down",slideInDist:150,slideOutDir:"right",slideOutDist:300,timeout:5e3,...t}).show()}}class er{constructor(e,t=(()=>{}),...n){this.date=e,this.callback=()=>t(...n),this.time=this.date.getTime()-(new Date).getTime(),this.elements=[],this.interval=setInterval((()=>{this.update()}),500)}update(){this.time=this.date.getTime()-(new Date).getTime(),this.time<=0?this.finish():this.show()}show(){const e=this.time,t=Math.floor(e/864e5),n=e%864e5,i=Math.floor(n/36e5),s=e%36e5,r=Math.floor(s/6e4),a=e%6e4,o=Math.floor(a/1e3);for(const e of this.elements)e.textContent=t?`${t}:${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:i?`${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}attach(e){this.elements.push(e),this.show()}detach(e){const t=this.elements.indexOf(e);-1!==t&&(this.elements[t].textContent="",this.elements.splice(t,1),this.show())}cleanUp(){clearInterval(this.interval);for(let e=this.elements.length-1;e>=0;e--)this.detach(this.elements[e])}finish(){this.callback(),clearInterval(this.interval),this.time=0,this.show()}}const tr=function(e=Ie()){const t=me(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=me(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(v(n.getOptions(),null!=t?t:{}))return e;In(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ws,persistence:[ps,Qi,Xi]}),i=c("authTokenSyncURL");if(i){const e=(s=i,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Qs)return;const i=null==t?void 0:t.token;Ys!==i&&(Ys=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(e,t,n){A(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(t,n,i,s){A(t).onIdTokenChanged((t=>e(t)),void 0,void 0)}(n)}var s;const r=(o="auth",null===(u=null===(l=a())||void 0===l?void 0:l.emulatorHosts)||void 0===u?void 0:u[o]);var o,l,u;return r&&function(e,t,n){const i=Si(e);Sn(i._canInitEmulator,i,"emulator-config-failed"),Sn(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!!(null==n?void 0:n.disableWarnings),r=_i(t),{host:a,port:o}=function(e){const t=_i(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const e=s[1];return{host:e,port:Ci(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Ci(t)}}}(t),c=null===o?"":`:${o}`;i.config.emulator={url:`${r}//${a}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:o,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${r}`),n}(gn),nr=432e6;let ir,sr,rr;window.addEventListener("storage",(e=>{"authExpiration"===e.key&&or()})),window.addEventListener("DOMContentLoaded",(function(){!function(){if(cr("public",location.pathname))return;const e=document.createElement("div");e.id="siteWideLoadingScreen";const t=document.createElement("style");t.innerHTML="\n    #siteWideLoadingScreen {\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 100vh;\n        width: 100vw;\n        position: absolute;\n        background-color: white;\n        z-index: 9999;\n        display: flex;\n    }\n      \n    body.authorized > #siteWideLoadingScreen {\n        display: none;\n    }\n      \n    #siteWideLoadingScreen:before {\n        content: '';\n        display: block;\n        border: 20px solid white;\n        border-top: 20px solid #110D65;\n        border-radius: 50%;\n        width: 100px;\n        height: 100px;\n        animation: spin 2s linear infinite;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        margin: auto;\n        position: absolute;\n    }\n      \n    @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n    }\n    ",document.body.appendChild(t),document.body.appendChild(e),document.body.classList.remove("authorized")}();try{!function(e,t,n,i){A(e).onAuthStateChanged((async e=>{let t=location.pathname;if(e){if(!localStorage.getItem("authExpiration")||parseInt(localStorage.getItem("authExpiration"))<(new Date).getTime())return void lr(!0);const n=(await jn(e)).claims.role,i=new URLSearchParams(document.location.search).get("redirect");if(i)return void window.location.replace(location.origin+decodeURI(i));if(!cr(n,t))return void window.location.replace(`${location.origin}/Dashboard/${n?n.charAt(0).toUpperCase()+n.slice(1):"Student"}`);localStorage.setItem("authExpiration",((new Date).getTime()+nr).toString()),or()}else if(!cr("public",t)){const e=encodeURI(t);return void window.location.replace(location.origin+"/sign-in?redirect="+e)}document.body.classList.add("authorized")}),void 0,void 0)}(tr)}catch(e){console.log(e),window.location.replace(location.origin+"/sign-in")}}));let ar={all:["/","/free-test-taker","/pricing","/why","/careers","/sign-up"],public:["/sign-in"],student:["/Dashboard/Student","/test-taker/*"],parent:["/Dashboard/Parent","/test-taker/*"],tutor:["/Dashboard/Tutor","/new-assignment","/view-curriculum","/student-overview/*","/test-taker/*"],admin:["&student","&parent","&tutor","/Dashboard/Admin","/new-parent","/new-student","/new-tutor"],dev:["&student","&parent","&tutor","&admin","/Dashboard/Dev","/testEditor","/analytics"]};async function or(){rr&&rr.hide(),ir&&ir.cleanUp(),sr&&sr.cleanUp();const e=localStorage.getItem("authExpiration")&&parseInt(localStorage.getItem("authExpiration"));ir=new er(new Date(e),(()=>{lr(!0)})),sr=new er(new Date(e-3e5),(async()=>{const e=document.createElement("p");e.style.margin="0",e.textContent="Are you still there? You will be signed out in ";const t=document.createElement("span");ir.attach(t),e.appendChild(t),rr=new Zs({message:e,choices:["YES","NO"],values:[!0,!1],timeout:ir.time,slideInDir:"down",fadeIn:!0});const n=await rr.show();!0===n?(localStorage.setItem("authExpiration",((new Date).getTime()+nr).toString()),or()):!1===n&&(rr.hide(),localStorage.setItem("authExpiration",((new Date).getTime()+nr).toString()),or(),lr())}))}function cr(e,t){const n=[...ar[e]??[],...ar.all];for(const e of n){const n=e.split("/"),i=t.split("/");if(n.length>i.length)continue;let s=!0;for(let e=0;e<i.length;e++){if(e<n.length&&i[e]!==n[e]&&"*"!==n[e]&&"**"!==n[e]){s=!1;break}if(e>=n.length&&"**"!==n[n.length-1]){s=!1;break}}if(!0===s)return!0}return!1}async function lr(e=!1){if(e)await Wi(tr);else{const e=new Zs({message:"Are you sure you want to sign out?",choices:["YES","NO"],values:[!0,!1],slideInDir:"down",fadeIn:!0});await e.show()&&await Wi(tr)}}!function(){for(const e in ar)ar[e]=ar[e].flatMap((e=>"&"===e.charAt(0)?ar[e.slice(1)]:e))}(),firebase.initializeApp({apiKey:"AIzaSyD8GSMZzjbubQ7AGcQKIV-enpDYpz_07mo",authDomain:"lyrn-web-app.firebaseapp.com",projectId:"lyrn-web-app",storageBucket:"lyrn-web-app.appspot.com",messagingSenderId:"80732012862",appId:"1:80732012862:web:22ffb978c80a1d2a0f2c6f",measurementId:"G-F2QZT3W2CX"});const ur=!1,dr="   ",hr=new Date;let pr,gr,mr=firebase.storage();function fr(e,t,n){if(t.length!=n.length)throw"option values and options texts must have the same number of elements";t.forEach(((t,i)=>{let s=document.createElement("option");s.value=t,s.textContent=n[i],e.appendChild(s)}))}function vr(e,t=[],n=[],i=[],s=""){let r=document.createElement(e);if(n.length==i.length&&n.length>0)for(let e=0;e<n.length;e++)r.setAttribute(n[e],i[e]);for(let e=0;e<t.length;e++)t[e]&&r.classList.add(t[e]);return""!=s&&(r.innerHTML=s),r}function yr(e=""){1==ur&&console.log(e+"resetMathJax()"),clearTimeout(pr),pr=setTimeout((async()=>{try{await MathJax.typesetPromise(),document.querySelectorAll(".MathJax").forEach((e=>{e.removeAttribute("tabindex")}))}catch(e){console.log(e)}}),250)}function wr(e=void 0,t=""){1==ur&&console.log(t+"getImageDomInfo()",{text:e});let n,i,s=document.querySelectorAll("textarea");if(null==e||""==e){for(let e=0;e<s.length;e++)if(s[e].value.includes("<image")){n=s[e];break}}else for(let t=0;t<s.length;t++)if(s[t].value.includes(e)){n=s[t];break}if(null==n)return!1;n.id.toLowerCase().includes("passage")?i="passage":n.id.toLowerCase().includes("question")?i="question":n.id.toLowerCase().includes("answer")&&(i="answer");const r=document.getElementById(("passage"==i?"passage":"questions")+"Test").querySelector("option:checked").textContent,a=document.getElementById(("passage"==i?"passage":"questions")+"Section").querySelector("option:checked").textContent.toLowerCase(),o=document.getElementById("passage"==i?"passageNumber":"questionsPassageNumber"),c=document.getElementById("passage"==i?"newPassageNumber":"questionsPassageNumber");let l,u,d=null;return d="new"==o.querySelector("option:checked").value?parseInt(c.value):parseInt(o.querySelector("option:checked").textContent),"passage"!=i&&(l=parseInt(document.getElementById("questionList").querySelector("option:checked").textContent)),"answer"==i&&(u=parseInt(n.id.split(i)[1])),{element:n,type:i,test:r,section:a,passage:d,question:l,answer:u}}function Ir(e="toggle",t=0,n=0,i=""){1==ur&&console.log(i+"displayRemovalMenu()",{action:e,x:t,y:n});let s=document.getElementById("imageRemovalPopup");"toggle"==e?s.classList.toggle("hidden"):"remove"==e?s.classList.add("hidden"):"add"==e&&s.classList.remove("hidden"),s.style.left=(parseInt(t)+30).toString()+"px",s.style.top=n+"px"}function br(e,t=""){1==ur&&console.log(t+"removeChildren()",{id:e});let n=document.getElementById(e);for(;n.children.length>0;)n.firstChild.remove()}function Er(e){return firebase.firestore().collection("ACT-Test-Data").doc(e).get()}function Sr(e){return firebase.firestore().collection("ACT-Passage-Data").doc(e).get()}async function Tr(e,t){return(await firebase.firestore().collection("ACT-Question-Data").where("test","==",e).where("section","==",t).get()).docs}async function _r(e=""){1==ur&&console.log(e+"saveTest()");let t=document.getElementById("testCode"),n=document.getElementById("isQuestionBank");const i=t.value.replace(/\D/g,"").length;let s=document.getElementById("testYear"),r=document.getElementById("testMonth");const a={code:t.value.toUpperCase(),isQuestionBank:n.checked,releaseDate:`${s.value}-${r.value}`};if(3==t.value.length&&parseInt(s.value)<=hr.getFullYear()&&parseInt(s.value)>=1959&&(1==i||2==i)){const t=await Er(document.getElementById("testList").value);if(t.exists){await firebase.firestore().collection("ACT-Test-Data").doc(t.id).set(a);const e=await firebase.firestore().collection("ACT-Question-Data").where("test","==",t.id).get();await Promise.all(e.docs.map((e=>e.ref.update({isQuestionBank:n.checked}))))}else{const e=firebase.firestore().collection("ACT-Test-Data").doc();await e.set(a),await Promise.all(["english","math","reading","science"].map((t=>function(e,t,n=[]){firebase.firestore().collection("ACT-Section-Data").doc().set({code:e,test:t,scaledScores:n})}(t,e.id))))}Zs.toastMessage("Test successfully saved!"),Cr(e+dr)}else Zs.toastError("The test code must be 3 characters long."),console.log("The test must have exactly 3 characters: B05, 76C, A10, etc. (1 - 2 letters and 1 - 2 numbers)")}async function Cr(e=""){1==ur&&console.log(e+"initializeTestDisplay()"),await xr("testList",e+dr);let t=document.getElementById("testYear");t.setAttribute("max",hr.getFullYear()),t.setAttribute("value",hr.getFullYear()),document.getElementById("testMonth").value=(hr.getMonth()+1).toString().padStart(2,"0"),document.getElementById("testCode").value=""}function kr(e=void 0,t=""){1==ur&&console.log(t+"selectAnswer()",{element:e});let n=document.getElementById("questionsPart2").querySelectorAll("label");for(let e=0;e<n.length;e++)n[e].classList.remove("correctAnswer");null!=e&&e.classList.add("correctAnswer")}async function Dr(e=void 0,t=void 0,n=void 0,i=void 0,s=""){1==ur&&console.log(s+"initializeQuestionsDisplay()",{test:e,section:t,passage:n,question:i});let r=document.getElementById("questionsTest"),a=document.getElementById("questionsSection"),o=document.getElementById("questionsPassageNumber"),c=document.getElementById("isGroupedByPassage"),l=document.getElementById("questionList"),u=document.getElementById("questionText"),d=document.getElementById("questionExplanation"),h=document.getElementById("topic");if("math"==a.querySelector("option:checked")?.textContent?.toLowerCase()?(document.getElementById("answer5").classList.remove("hidden"),document.getElementById("answer5Label").classList.remove("hidden")):(document.getElementById("answer5").classList.add("hidden"),document.getElementById("answer5Label").classList.add("hidden")),br(r.id),br(a.id),br(o.id),br(l.id),br(h.id),br("pText"),u.value=null,d.value=null,c.checked=!1,document.querySelectorAll('textarea[id^="answer"]').forEach((e=>e.value=null)),document.getElementById("questions").dispatchEvent(new Event("input",{bubbles:!0})),document.getElementById("questionsPart2").querySelectorAll("label").forEach((e=>e.classList.remove("correctAnswer"))),await xr("questionsTest",s+dr),r.focus(),e&&(r.value=e,await Br("questionsSection",e),a.focus(),t&&(a.value=t,await qr("questionsPassageNumber",e,t),await async function(e,t=""){1==ur&&console.log(t+"initializeTopicList()",{section:e}),$(".ui.dropdown").dropdown();const n=firebase.firestore().collection("ACT-Curriculum-Data").where("sectionCode","==",e);let i=document.getElementById("topic");br("topic",t+dr);let s=(await n.get()).docs.sort(((e,t)=>Ur(e.data().code,t.data().code)));i.appendChild(vr("option",[],["value"],[""],"None Selected"));for(let e=0;e<s.length;e++)i.appendChild(vr("option",[],["value"],[s[e].id],s[e].data().code))}(a.querySelector("option:checked").textContent.toLowerCase(),s+dr),function(e,t,n=""){1==ur&&console.log(n+"initializeQuestionNumbersList()",{test:e,section:t}),br("qNumbers",n+dr);let i=document.getElementById("qNumbers"),s=[],r={},a={};Tr(e,t).then((n=>{if(n.length>0){n.forEach((e=>{const t=e.data().code;s.push(t),a[t]=e.id;const n=document.getElementById("questionsSection").querySelector("option:checked").textContent.toLowerCase();e.data().choices.length==("math"!=n?4:5)&&""!=e.data().choices[0]?e.data().topic?r[t]="stage3":r[t]="stage2":r[t]="stage1"})),s.sort((function(e,t){return e-t}));for(let n=0;n<s.length;n++){let o=vr("div",["problem",r[n+1]],[],[],s[n].toString());o.addEventListener("click",(()=>{Dr(e,t,null,a[s[n]])})),i.appendChild(o)}}}))}(e,t,s+dr),await async function(e,t,n,i=""){1==ur&&console.log(i+"initializeQuestion()",{id:e}),br(e,i+dr);let s=document.getElementById(e);s.appendChild(vr("option",[],["value","disabled","selected"],["",!0,!0],"select a question"));let r=await Tr(t,n);r.sort(((e,t)=>e.data().code-t.data().code)),r.forEach((e=>{s.appendChild(vr("option",[],["value"],[e.id],e.data().code))}))}("questionList",e,t),l.focus(),i))){l.value=i,u.focus();const e=await(p=i,firebase.firestore().collection("ACT-Question-Data").doc(p).get());if(e.exists){if(function(e,t=""){1==ur&&console.log(t+"resetQuestion()",{number:e}),e%2==1?(document.getElementById("answer1Label").innerHTML="A",document.getElementById("answer2Label").innerHTML="B",document.getElementById("answer3Label").innerHTML="C",document.getElementById("answer4Label").innerHTML="D",document.getElementById("answer5Label").innerHTML="E"):(document.getElementById("answer1Label").innerHTML="F",document.getElementById("answer2Label").innerHTML="G",document.getElementById("answer3Label").innerHTML="H",document.getElementById("answer4Label").innerHTML="J",document.getElementById("answer5Label").innerHTML="K"),kr(void 0,t+dr);const n=document.getElementById("questionsSection").querySelector("option:checked").textContent.toLowerCase();for(let e=0;e<("math"!=n?4:5);e++)document.getElementById("answer"+(e+1).toString()).value=""}(e.data().code),u.value=e.data().content??"",d.value=e.data().explanation??"",c.checked=e.data().isGroupedByPassage??!1,h.value=e.data().topic,e.data().choices)for(let t=0;t<e.data().choices.length;t++)document.getElementById("answer"+(t+1).toString()).value=e.data().choices[t];if(document.getElementById("questions").dispatchEvent(new Event("input",{bubbles:!0})),kr(document.getElementById("answer"+(e.data().answer+1).toString()+"Label"),s+dr),e.data().passage){o.value=e.data().passage;const t=await Sr(e.data().passage);if(t.exists){Vr(t.data());let n=document.getElementById("pText").querySelectorAll("span");for(let e=0;e<n.length;e++)n[e].classList.remove("spotlight"),n[e].classList.remove("box");"english"!=a.querySelector("option:checked").textContent.toLowerCase()&&"reading"!=a.querySelector("option:checked").textContent.toLowerCase()||document.querySelectorAll('span[data-question="'+e.data().code.toString()+'"]').forEach((e=>{null!=e&&parseInt(e.innerHTML)>=1&&parseInt(e.innerHTML)<=75?e.classList.add("box"):null!=e&&""!=e.innerHTML&&null!=e.innerHTML&&e.classList.add("spotlight")}))}}else if(n){o.value=n;const t=await Sr(n);if(t.exists){Vr(t.data());let n=document.getElementById("pText").querySelectorAll("span");for(let e=0;e<n.length;e++)n[e].classList.remove("spotlight"),n[e].classList.remove("box");"english"!=a.querySelector("option:checked").textContent.toLowerCase()&&"reading"!=a.querySelector("option:checked").textContent.toLowerCase()||document.querySelectorAll('span[data-question="'+e.data().code.toString()+'"]').forEach((e=>{null!=e&&parseInt(e.innerHTML)>=1&&parseInt(e.innerHTML)<=75?e.classList.add("box"):null!=e&&""!=e.innerHTML&&null!=e.innerHTML&&e.classList.add("spotlight")}))}}}}var p;yr()}function Ar(e,t){return new RegExp(`^<${e}>.*</${e}>$`,"g").test(t)}async function Lr(e=!0,t=""){1==ur&&console.log(t+"saveQuetion()",{goToNext:e});const n=document.getElementById("questionsTest").value,i=document.getElementById("questionsSection").value,s=document.getElementById("questionsSection").querySelector("option:checked")?.textContent?.toLowerCase(),r=document.getElementById("questionsPassageNumber").value||null,a=document.getElementById("questionList").value,o=document.getElementById("topic").value||null,c=document.getElementById("isGroupedByPassage").checked;if(!n||!i||!a)return void Zs.toastError("You are missing some data");let l=[];for(let e=0;e<("math"!=s?4:5);e++)l.push(document.getElementById("answer"+(e+1).toString()).value);let u=document.getElementById("questionText");for(;u.value.includes("  ");)u.value=u.value.replaceAll("  "," ").replaceAll(" teh "," the ");let d=document.getElementById("questionExplanation");for(;d.value.includes("  ");)d.value=d.value.replaceAll("  "," ").replaceAll(" teh "," the ");for(let e=0;e<l.length;e++)for(0==Ar("p",l[e])&&0==Ar("img",l[e])&&0==Ar("p",l[e])&&(l[e]="<p>"+l[e]+"</p>");l[e].includes("  ");)l[e]=l[e].replaceAll("  "," ");if(l.length==("math"!=s?4:5)){const t=(await firebase.firestore().collection("ACT-Test-Data").doc(n).get()).data().isQuestionBank,i={choices:l,content:u.value,explanation:d.value,passage:r,topic:o,isQuestionBank:t};if(await firebase.firestore().collection("ACT-Question-Data").doc(a).update(i),r){const e=await firebase.firestore().collection("ACT-Question-Data").where("passage","==",r).get();await Promise.all(e.docs.map((e=>{e.ref.update({isGroupedByPassage:c})})))}e&&Or(),Zs.toastMessage("Question successfully saved!",{justify:"start",slideOutDir:"left",timeout:2e3})}}function Or(){const e=document.getElementById("questionList").querySelector("option:checked+option")?.value;e&&Dr(document.getElementById("questionsTest").value,document.getElementById("questionsSection").value,null,e)}async function Rr(e,t,n=""){1==ur&&console.log(n+"displayScaledScores()",{test:e,section:t});let i=document.getElementById("scaledScores");if(br("scaledScores",n+dr),!e||!t)return;let s=await(r=t,firebase.firestore().collection("ACT-Section-Data").doc(r).get());var r;for(let e=0;e<3;e++){dom_labels=vr("div",["rows"],["style"],["margin-left: 50px; align-items: center;"],""),dom_labels.appendChild(vr("label",[],[],[],"Scaled Score")),dom_scores=vr("div",["rows"],["style"],["margin-left: 10px; align-items: center;"],""),dom_scores.appendChild(vr("label",[],[],[],"Min Score"));for(let t=0;t<12;t++)dom_labels.appendChild(vr("label",[],["for"],["ss"+(36-12*e-t).toString()],(36-12*e-t).toString())),s.exists&&null!=s.data().scaledScores[36-12*e-t]?dom_scores.appendChild(vr("input",[],["id","value"],["ss"+(36-12*e-t).toString(),-1!=s.data().scaledScores[36-12*e-t]?s.data().scaledScores[36-12*e-t].toString():"-"],"")):dom_scores.appendChild(vr("input",[],["id"],["ss"+(36-12*e-t).toString()],""));i.appendChild(dom_labels),i.appendChild(dom_scores)}}async function Nr(e=""){1==ur&&console.log(e+"savePassage()");let t=document.getElementById("passageTest").value,n=document.getElementById("passageSection").value,i=document.getElementById("passageNumber").value,s=Number(document.getElementById("newPassageNumber").value),r=document.getElementById("passageText").value;if(t)if(n)if(i)if("new"!==i||s&&!(s<1)){for(;r.includes("  ");)r=r.replaceAll("  "," ");if(r.length>0){if("new"===i){const e=firebase.firestore().collection("ACT-Passage-Data").doc();await e.set({test:t,section:n,code:s,content:r}),i=e.id}else await firebase.firestore().collection("ACT-Passage-Data").doc(i).update({content:r});Zs.toastMessage("Passage successfully saved!"),Mr(t,n,i,e)}else Zs.toastError("You did not input any text")}else Zs.toastError("Your new passage number is invalid");else Zs.toastError("You are missing the passage");else Zs.toastError("You are missing the section");else Zs.toastError("You are missing the test")}async function Pr(){const e=document.getElementById("curriculumTopic").value;e?(await firebase.firestore().collection("ACT-Curriculum-Data").doc(e).update({content:document.getElementById("curriculumText").value}),Zs.toastMessage("Curriculum successfully saved!")):Zs.toastError("You are missing the curriclum topic")}async function Mr(e=void 0,t=void 0,n=void 0,i=""){1==ur&&console.log(i+"initializePassageDisplay()",{test:e,section:t,passage:n});let s=document.querySelectorAll("img[id^='image']");for(let e=0;e<s.length;e++)s[s.length-e-1].remove();let r=document.getElementById("passageTest"),a=document.getElementById("passageSection"),o=document.getElementById("passageNumber"),c=document.getElementById("newPassageNumber"),l=document.getElementById("passageText");if(br(r.id),br(a.id),br(o.id),l.value=null,l.dispatchEvent(new Event("input",{bubbles:!0})),c.value=null,await xr("passageTest",i+dr),e&&(r.value=e,await Br("passageSection",e),t&&(a.value=t,await qr("passageNumber",e,t,!0),n))){o.value=n;const e=await Sr(n);if(e.exists){const t=e.data();l.value=t.content,l.dispatchEvent(new Event("input",{bubbles:!0}))}}let u=document.getElementById("pText").querySelectorAll("span");for(let e=0;e<u.length;e++){const n=u[e];"english"!=(t??a.value)&&"reading"!=(t??a.value)||(null!=n&&parseInt(n.innerHTML)>=1&&parseInt(n.innerHTML)<=75?n.classList.add("box"):null!=n&&""!=n.innerHTML&&null!=n.innerHTML&&n.classList.add("spotlight"))}}async function xr(e,t=""){1==ur&&console.log(t+"initializeTests()",{id:e}),br(e,t+dr);let n=document.getElementById(e);"testList"==e?n.appendChild(vr("option",[],["value"],["newTest"],"New Test")):n.appendChild(vr("option",[],["value","disabled","selected"],["",!0,!0],"select a test"));let i=await async function(e=""){1==ur&&console.log(e+"getTests()");const t=firebase.firestore().collection("ACT-Test-Data");return(await t.get()).docs}(t+dr);i.sort(((e,t)=>Ur(e.data().code,t.data().code))),i.forEach((e=>{n.appendChild(vr("option",[],["value"],[e.id],e.data().code))}))}async function Br(e,t,n=""){1==ur&&console.log(n+"initializeSections()",{id:e}),br(e,n+dr);let i=document.getElementById(e);i.appendChild(vr("option",[],["value","disabled","selected"],["",!0,!0],"select a section"));let s=await async function(e){return(await firebase.firestore().collection("ACT-Section-Data").where("test","==",e).get()).docs}(t);s.sort(((e,t)=>function(e,t){const n={english:0,math:1,reading:2,science:3};return n[e]-n[t]}(e.data().code,t.data().code))),s.forEach((e=>{var t;i.appendChild(vr("option",[],["value"],[e.id],(t=e.data().code)[0].toUpperCase()+t.slice(1)))}))}async function qr(e,t,n,i=!1,s=""){1==ur&&console.log(s+"initializePassage()",{id:e}),br(e,s+dr);let r=document.getElementById(e);r.appendChild(vr("option",[],["value","disabled","selected"],["",!0,!0],"select a passage"));let a=await async function(e,t){return(await firebase.firestore().collection("ACT-Passage-Data").where("test","==",e).where("section","==",t).get()).docs}(t,n);a.sort(((e,t)=>e.data().code-t.data().code)),a.forEach((e=>{r.appendChild(vr("option",[],["value"],[e.id],e.data().code))})),i&&r.appendChild(vr("option",[],["value"],["new"],"Create new passage"))}function Ur(e,t){return(e=e.toString())<(t=t.toString())?-1:e==t?0:e>t?1:void 0}async function Fr(e){return(await firebase.firestore().collection("ACT-Curriculum-Data").where("sectionCode","==",e).get()).docs}async function jr(e,t,n=""){1==ur&&console.log(n+"displayAnswerKey()",{test:e,section:t});let i=document.getElementById("answers");if(br("answers",n+dr),!e||!t)return;let s=await firebase.firestore().collection("ACT-Question-Data").where("test","==",e).where("section","==",t).get();const r={0:{0:"F",1:"G",2:"H",3:"J",4:"K"},1:{0:"A",1:"B",2:"C",3:"D",4:"E"}};let a={},o={};s.forEach((e=>{a[e.data().code]=r[e.data().code%2][e.data().answer],o[e.data().code]=e.id}));let c=40;"english"==document.getElementById("answersSection").querySelector("option:checked").textContent.toLowerCase()?c=75:"math"==document.getElementById("answersSection").querySelector("option:checked").textContent.toLowerCase()&&(c=60);for(let e=0;e<Math.floor((c+6)/10);e++){let t=vr("div",["rows"],[],[],"");for(let n=0;n<10;n++)10*e+n<c&&t.appendChild(vr("label",[],["id","for"],["qq"+(10*e+n+1).toString()+"Label","qq"+(10*e+n+1).toString()],10*e+n+1));i.appendChild(t);let n=vr("div",["rows"],[],[],"");for(let t=0;t<10;t++)10*e+t<c&&(a[10*e+t+1]?n.appendChild(vr("input",[],["id","data-question","value"],["qq"+(10*e+t+1).toString(),o[10*e+t+1]??"",a[10*e+t+1]],"")):n.appendChild(vr("input",[],["id","data-question"],["qq"+(10*e+t+1).toString(),o[10*e+t+1]??""],"")));i.appendChild(n)}}function $r(e=""){1==ur&&console.log(e+"saveAnswers()");const t=document.querySelectorAll("input[id^='qq']");let n=document.getElementById("answersSection"),i=document.getElementById("answersTest");const s=["A","B","C","D"],r=["F","G","H","J"],a={A:0,B:1,C:2,D:3,E:4,F:0,G:1,H:2,J:3,K:4};let o=!0;for(let e=0;e<t.length;e++)t[e]||(o=!1),"math"!=n.querySelector("option:checked").textContent.toLowerCase()?e%2==0?s.includes(t[e].value.toUpperCase())||(t[e].value="",o=!1):r.includes(t[e].value.toUpperCase())||(t[e].value="",o=!1):e%2==0?s.includes(t[e].value.toUpperCase())||"E"==t[e].value.toUpperCase()||(t[e].value="",o=!1):r.includes(t[e].value.toUpperCase())||"K"==t[e].value.toUpperCase()||(t[e].value="",o=!1);if(1==o){let e=[];for(let s=0;s<t.length;s++)t[s].dataset.question?e.push(firebase.firestore().collection("ACT-Question-Data").doc(t[s].dataset.question).update({answer:a[t[s].value.toUpperCase()]})):e.push((async()=>{const e=firebase.firestore().collection("ACT-Question-Data").doc();t[s].setAttribute("data-question",e.id);const r=(await firebase.firestore().collection("ACT-Test-Data").doc(i.value).get()).data().isQuestionBank;return e.set({answer:a[t[s].value.toUpperCase()],choices:[],code:s+1,content:null,passage:null,section:n.value,test:i.value,topic:null,isQuestionBank:r})})());Promise.all(e).then((()=>{Zs.toastMessage("Answers successfully saved!")})).catch((e=>{Zs.toastError("Error saving answers"),console.log(e)}))}else Zs.toastError("Please correct your issues")}async function Hr(e=""){1==ur&&console.log(e+"saveScaledScores()");const t=document.querySelectorAll("input[id^='ss']");let n=document.getElementById("scaledScoresSection"),i=(document.getElementById("scaledScoresTest"),40);"english"==document.getElementById("scaledScoresSection").querySelector("option:checked").textContent.toLowerCase()?i=75:"math"==document.getElementById("scaledScoresSection").querySelector("option:checked").textContent.toLowerCase()&&(i=60);let s=!0,r={};for(let e=0;e<t.length;e++)r[parseInt(t[e].id.split("ss")[1])]=""==t[e].value||"-"==t[e].value?-1:parseInt(t[e].value),""==t[e].value||"-"==t[e].value||parseInt(t[e].value)<=i&&parseInt(t[e].value)>=0||(t[e].value="",s=!1);let a=r[1];for(let e=0;e<t.length-1;e++)r[e+2]>a?a=r[e+2]:-1!=r[e+2]&&(document.getElementById("ss"+(e+2).toString()).value="",s=!1);1==s?(await firebase.firestore().collection("ACT-Section-Data").doc(n.value).update({scaledScores:r}),Zs.toastMessage("Scaled scores successfully saved")):Zs.toastError("Please correct your issues")}function Vr(e,t=""){1==ur&&console.log(t+"setPassageText()",e),br("pText",t+dr);let n=document.getElementById("pText");null!=e.content&&""!=e.content&&(n.innerHTML=e.content);let i=document.getElementById("pText").querySelectorAll("span");for(let e=0;e<i.length;e++){let t=i[e];null!=t&&parseInt(t.innerHTML)>=1&&parseInt(t.innerHTML)<=75?t.classList.add("box"):null!=t&&""!=t.innerHTML&&null!=t.innerHTML&&t.classList.add("spotlight")}yr(t+dr)}window.selectDisplay=function(e,t=""){1==ur&&console.log(t+"selectDisplay()",{id:e}),br("pText",t+dr),br("qNumbers",t+dr),br("qList",t+dr);let n=document.querySelectorAll('*[id$="Display"]');for(let t=0;t<n.length;t++)n[t].id!=e?n[t].classList.add("hidden"):n[t].classList.remove("hidden");document.getElementById("topic").parentNode.style="display:none","testDisplay"==e?Cr(t+dr):"answersDisplay"==e?async function(e=""){1==ur&&console.log(e+"initializeAnswersDisplay()"),await xr("answersTest",e+dr),jr(document.getElementById("answersTest").value,document.getElementById("answersSection").value,e+dr)}(t+dr):"passageDisplay"==e?Mr(void 0,void 0,1,t+dr):"scaledScoresDisplay"==e?async function(e=""){1==ur&&console.log(e+"initializeScaledScoresDisplay()"),await xr("scaledScoresTest",e+dr),Rr(document.getElementById("scaledScoresTest").value,document.getElementById("scaledScoresSection").value,e+dr)}(t+dr):"questionsDisplay"==e?(document.getElementById("topic").parentNode.style="",Dr(void 0,void 0,void 0,void 0,t+dr)):"curriculumDisplay"==e&&async function(){document.getElementById("curriculumText").value=null,document.getElementById("curriculumSection").value="english";const e=(await Fr("english")).map((e=>({topic:e.data().code,id:e.id}))).sort(((e,t)=>Ur(e.topic,t.topic))),t=e.map((e=>e.topic)),n=e.map((e=>e.id));br("curriculumTopic"),fr(document.getElementById("curriculumTopic"),["",...n],["select a topic",...t])}()},window.removeImage=function(e=""){1==ur&&console.log(e+"removeImage()");const t=parseInt(gr.id.replace("image",""));let n,i=document.querySelectorAll("textarea"),s=wr(gr.src,e+dr);const r=function(e,t,n=""){1==ur&&console.log(n+"getImageString()",{element:e,number:t});let i="<img";const s=e.value.split("<img");for(let e=1;e<s.length;e++)if(parseInt(s[e].split("id")[1].split('"')[1].replace("image",""))==t){let t=0;for(;">"!=s[e][t];)i+=s[e][t],t+=1;i+=">";break}return i}(s.element,t,e+dr);for(let e=0;e<i.length;e++)if(i[e].value.includes(r)){n=i[e];break}let a;n.value=n.value.replace(r,""),"passage"==s.type?a=s.test+"-"+s.section+"-P"+s.passage.toString()+"-I"+t.toString()+".png":"question"==s.type?a=s.test+"-"+s.section+"-P"+s.passage.toString()+"-Q"+s.question+"-I"+t.toString()+".png":"answer"==s.type&&(a=s.test+"-"+s.section+"-P"+s.passage.toString()+"-Q"+s.question.toString()+"-A"+s.answer.toString()+"-I"+t.toString()+".png"),mr.refFromURL("gs://lyrn-web-app.appspot.com/Images/Tests/"+a).delete().then((()=>{"passage"==s.type?Nr(e+dr):Lr(!1,e+dr),Ir("remove",e+dr)})).catch((e=>{console.log(e)}))},window.saveTest=_r,window.savePassage=Nr,window.clickInput=function(e=""){1==ur&&console.log(e+"clickInput()");const t=wr(void 0,e+dr);console.log(t),0!=t?document.getElementById(("passage"==t.type?"passage":"questions")+"Image").click():console.log('Please type "<image>" where you want the image to be placed in the text first')},window.addImage=function(e=""){1==ur&&console.log(e+"addImage()");const t=wr(void 0,e+dr);console.log(t);let n=t.element.value.split("<img"),i=[];for(let e=1;e<n.length;e++){let t=n[e].split("id")[1].split("image")[1];number="";for(let e=0;e<t.length&&'"'!=t[e];e++)number+=t[e];i.push(parseInt(number))}i.sort(((e,t)=>e-t));let s=1;for(let e=0;e<i.length+1;e++)if(e+1!=i[e]){s=e+1;break}if("passage"==t.type){let e=document.getElementById("passageImage").files[0];e.name.substring(e.name.lastIndexOf(".")+1);t.test,t.section,t.passage.toString(),s.toString()}else if("question"==t.type){let e=document.getElementById("questionsImage").files[0];e.name.substring(e.name.lastIndexOf(".")+1);t.test,t.section,t.passage.toString(),t.question,s.toString()}else if("answer"==t.type){let e=document.getElementById("questionsImage").files[0];e.name.substring(e.name.lastIndexOf(".")+1);t.test,t.section,t.passage.toString(),t.question.toString(),t.answer.toString(),s.toString()}let r=mr.refFromURL("gs://lyrn-web-app.appspot.com/Images/Tests/"+undefined).put(undefined);r.on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){r.snapshot.ref.getDownloadURL().then((function(n){t.element.value=t.element.value.replaceAll("<image>",'<img id = "image'+s+'" src="'+n+'">'),"passage"==t.type?(document.getElementById("passageImage").value=null,Nr(e+dr)):(document.getElementById("questionsImage").value=null,Lr(!1,e+dr))}))}))},window.saveAnswers=$r,window.saveScaledScores=Hr,window.previousQuestion=function(){const e=document.getElementById("questionList"),t=e.querySelector("option:checked"),n=Array.from(e.children).indexOf(t),i=e.children.item(n-1).value;i&&Dr(document.getElementById("questionsTest").value,document.getElementById("questionsSection").value,null,i)},window.saveQuestion=Lr,window.nextQuestion=Or,window.saveCurriculum=Pr,document.querySelectorAll("input, textarea").forEach((e=>{e.addEventListener("keydown",(e=>{e.ctrlKey&&"Enter"===e.key&&e.preventDefault()}))})),document.querySelector("main").addEventListener("keydown",(e=>{if(e.ctrlKey&&"Enter"===e.key&&!e.repeat){const e=document.querySelector("main").querySelector("#firstHalf > div.columns:not(.hidden)");if(!e)return;switch(e.id.split("Display")[0]){case"test":_r();break;case"answers":$r();break;case"scaledScores":Hr();break;case"passage":Nr();break;case"questions":Lr();break;case"curriculum":Pr();break;default:Zs.toastError("No save function for this display.")}}})),document.getElementsByTagName("main")[0].addEventListener("contextmenu",(function(e){e.target.id.toLowerCase().includes("image")&&(e.preventDefault(),gr=e.target,Ir("toggle",e.clientX,e.clientY,dr))})),document.getElementsByTagName("main")[0].addEventListener("click",(function(e){Ir("remove",dr)}));let zr=document.getElementById("testList");zr.addEventListener("change",(async function(){if(1==ur&&console.log('EVENT LISTENER (id = "testList")',{value:zr.value}),"newTest"==zr.value)document.getElementById("testYear").value=hr.getFullYear(),document.getElementById("testMonth").value=function(e){if("number"!=typeof e)return;const t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1,s=t.getDate(),r=t.getDay()+1,a=t.getHours(),o=["January","February","March","April","May","June","July","August","September","October","November","December"],c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return{year:n,monthNumber:i,monthString:o[i-1],dayOfMonth:s,dayOfWeekNumber:r,dayOfWeekString:c[r-1],hours:a>12?a-12:a,militaryHours:a,minutes:t.getMinutes(),seconds:t.getSeconds(),milliseconds:t.getMilliseconds(),integerValue:e,shortDate:i.toString()+"/"+s.toString()+"/"+n.toString(),time:(a>12?(a-12).toString():a.toString())+":"+t.getMinutes().toString().padStart(2,"0")+(a>=12?" pm":" am"),longDate:i.toString()+"/"+s.toString()+"/"+n.toString()+" "+(a>12?(a-12).toString():a.toString())+":"+t.getMinutes().toString().padStart(2,"0")+(a>=12?" pm":" am"),longDateMilitary:i.toString()+"/"+s.toString()+"/"+n.toString()+" "+a.toString()+":"+t.getMinutes().toString().padStart(2,"0"),"mm/dd/yyyy":i.toString().padStart(2,"0")+"/"+s.toString().padStart(2,"0")+"/"+n.toString().padStart(4,"0"),fullCalendar:n.toString().padStart(4,"0")+"-"+i.toString().padStart(2,"0")+"-"+s.toString().padStart(2,"0")+"T"+a.toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0"),completeCalendar:n.toString().padStart(4,"0")+"-"+i.toString().padStart(2,"0")+"-"+s.toString().padStart(2,"0")+"T"+a.toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")+":"+t.getSeconds().toString().padStart(2,"0"),shortestDate:i.toString()+"/"+s.toString()+"/"+n.toString().slice(-2),startOfDayInt:new Date(n,i-1,s,0,0,0,0).getTime(),shortDateAndDay:c[r-1]+i.toString()+"/"+s.toString()+"/"+n.toString(),shortReadable:c[r-1]+" "+o[i-1]+" "+s.toString()+", "+n.toString(),longReadable:c[r-1]+" "+o[i-1]+" "+s.toString()+", "+n.toString()+" at "+(a>12?(a-12).toString():a.toString())+":"+t.getMinutes().toString().padStart(2,"0")+(a>=12?" p":" a")+"m",veryLongReadable:c[r-1]+" "+o[i-1]+" "+s.toString()+", "+n.toString()+" at "+(a>12?(a-12).toString():(0==a?12:a).toString())+":"+t.getMinutes().toString().padStart(2,"0")+":"+t.getSeconds().toString().padStart(2,"0")+(a>=12?" p":" a")+"m",dayAndDate:c[r-1]+", "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][i-1]+" "+s.toString(),shortDateTime:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][r-1]+" "+i+"/"+s+"/"+n.toString().slice(-2)+", "+(a>12?(a-12).toString():0==a?"12":a.toString())+":"+t.getMinutes().toString().padStart(2,"0")+(a>=12?" pm":" am")}}(hr.getTime()).monthString,document.getElementById("testCode").value="",document.getElementById("isQuestionBank").checked=!0;else{let e=await Er(zr.value),t=document.getElementById("testYear"),n=document.getElementById("testMonth"),i=document.getElementById("testCode"),s=document.getElementById("isQuestionBank");t.value=e.data().releaseDate.split("-")[0],n.value=e.data().releaseDate.split("-")[1],i.value=e.data().code,s.checked=e.data().isQuestionBank}}));let Wr=document.getElementById("answersTest");Wr.addEventListener("change",(async function(){1==ur&&console.log('EVENT LISTENER (id = "answersTest")',{value:Wr.value}),await Br("answersSection",Wr.value),jr(Wr.value,Kr.value,dr)}));let Kr=document.getElementById("answersSection");Kr.addEventListener("change",(async function(){1==ur&&console.log('EVENT LISTENER (id = "answersSection")',{value:Kr.value}),jr(Wr.value,Kr.value,dr)}));let Gr=document.getElementById("passageTest");Gr.addEventListener("change",(function(){1==ur&&console.log('EVENT LISTENER (id = "passageTest")'),Mr(Gr.value,null,null,dr)}));let Jr=document.getElementById("passageSection");Jr.addEventListener("change",(function(){1==ur&&console.log('EVENT LISTENER (id = "passageSection")'),Mr(Gr.value,Jr.value,null,dr)}));let Qr=document.getElementById("passageNumber");Qr.addEventListener("change",(function(){1==ur&&console.log('EVENT LISTENER (id = "passageNumber")'),Mr(Gr.value,Jr.value,Qr.value,dr)}));let Yr=document.querySelectorAll('div[id$="Passage"]');for(let e=0;e<Yr.length;e++)Yr[e].addEventListener("input",(function(e){1==ur&&console.log('EVENT LISTENER (id = "'+e.target.id+'")'),e.target.id.toLowerCase().includes("image")||(e.target.id.includes("PassageText"),e.target.value=e.target.value.replaceAll("\n"," ").replaceAll("--","&mdash;").replaceAll("—","&mdash;")),Vr({content:e.target.value})}));let Xr=document.getElementById("scaledScoresTest");Xr.addEventListener("change",(async function(){1==ur&&console.log('EVENT LISTENER (id = "scaledScoresTest")',{value:Xr.value}),Br("scaledScoresSection",Xr.value),Rr(Xr.value,Zr.value,dr)}));let Zr=document.getElementById("scaledScoresSection");Zr.addEventListener("change",(async function(){1==ur&&console.log('EVENT LISTENER (id = "scaledScoresSection")',{value:Zr.value}),Rr(Xr.value,Zr.value,dr)}));let ea=document.getElementById("questionsTest");ea.addEventListener("change",(async function(){1==ur&&console.log('EVENT LISTENER (id = "questionsTest")',{value:ea.value}),br("qNumbers"),br("pText"),br("qList"),Dr(ea.value,null,null,null,dr)}));let ta=document.getElementById("questionsSection");ta.addEventListener("change",(async function(){1==ur&&console.log('EVENT LISTENER (id = "questionsSection")',{value:ta.value}),Dr(ea.value,ta.value,null,null,dr)}));let na=document.getElementById("questionsPassageNumber");na.addEventListener("change",(async function(){1==ur&&console.log('EVENT LISTENER (id = "questionsPassageNumber")',{value:na.value}),Dr(ea.value,ta.value,na.value,ia.value,dr)}));let ia=document.getElementById("questionList");ia.addEventListener("change",(async function(){1==ur&&console.log('EVENT LISTENER (id = "questionList")',{value:ia.value}),Dr(ea.value,ta.value,null,ia.value,dr)})),document.getElementById("questions").addEventListener("input",(async function(e){1==ur&&console.log("EVENT LISTENER (id = "+e.target.id),"textarea"==e.target.tagName.toLowerCase()&&(e.target.value=e.target.value.replaceAll("\n"," ").replaceAll("--","&mdash;").replaceAll("—","&mdash;").replaceAll(" teh "," the "));let t=[],n=document.querySelectorAll('textarea[id^="answer"]');for(let e=0;e<n.length;e++)t.push(n[e].value);"math"!=ta.querySelector("option:checked")?.textContent?.toLowerCase()&&t.splice(t.length-1,1),await async function(e,t,n,i,s=""){1==ur&&console.log(s+"initializeQuestionPreview()",{question:e,answers:n,number:i});const r=["F","G","H","J","K","A","B","C","D","E"];if(br("qList",s+dr),!i)return;const a=document.getElementById("qList"),o=document.getElementById("eText");null!=e&&""!=e&&a.appendChild(vr("p",["questionText"],[],[],e));let c=vr("div",["answerText"],[],[],"");for(let e=0;e<n.length;e++)c.appendChild(vr("p",[],[],[],r[e+i%2*5]+") "+n[e]));a.appendChild(c),o.innerHTML=t}(document.getElementById("questionText").value,document.getElementById("questionExplanation").value,t,Number(ia.querySelector("option:checked")?.textContent),dr),yr()}));let sa=document.querySelector("#curriculumText");sa.addEventListener("input",(function(e){1==ur&&console.log('EVENT LISTENER (id = "'+e.target.id+'")'),e.target.id.toLowerCase().includes("image")||(e.target.value=e.target.value.replaceAll("--","&mdash;").replaceAll("—","&mdash;").replaceAll(" teh "," the ")),function(e,t=""){1==ur&&console.log(t+"setPassageTextSimple()",data),br("pText",t+dr),document.getElementById("pText").innerHTML=e,yr(t+dr)}(e.target.value,dr)})),sa.addEventListener("keydown",(function(e){if("Tab"==e.key){e.preventDefault();var t=this.selectionStart,n=this.selectionEnd;this.value=this.value.substring(0,t)+"\t"+this.value.substring(n),this.selectionStart=this.selectionEnd=t+1}})),document.querySelector("#curriculumSection").addEventListener("change",(async e=>{1==ur&&console.log('EVENT LISTENER (id = "'+e.target.id+'")');const t=(await Fr(e.target.value)).map((e=>({topic:e.data().code,id:e.id}))).sort(((e,t)=>Ur(e.topic,t.topic))),n=t.map((e=>e.topic)),i=t.map((e=>e.id));br("curriculumTopic"),fr(document.getElementById("curriculumTopic"),["",...i],["select a topic",...n]),document.getElementById("curriculumText").value="",document.getElementById("curriculumText").dispatchEvent(new Event("input",{bubbles:!0}))})),document.querySelector("#curriculumTopic").addEventListener("change",(async e=>{1==ur&&console.log('EVENT LISTENER (id = "'+e.target.id+'")');const t=await async function(e){return await firebase.firestore().collection("ACT-Curriculum-Data").doc(e).get()}(e.target.value);document.getElementById("curriculumText").value=t.data().content??null,document.getElementById("curriculumText").dispatchEvent(new Event("input",{bubbles:!0}))}))})();